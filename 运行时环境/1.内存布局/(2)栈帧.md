栈帧（Stack Frame）
=================


运行时内存布局中，栈帧是一个重要的概念。我们知道，函数是程序的基本组成单元，函数运行时，系统会为它分配临时栈内存，用来存储临时变量，传递函数调用参数，保存运行状态，这个临时栈内存在一个函数调用下的结构就是栈帧。



## 栈帧结构


下图是函数运行时，函数相关数据在内存上的布局情况。

+ 函数运行时，系统会为它分配临时栈内存。
+ 函数运行时，相关数据除了保存在内存（栈内存空间），但也需要通过寄存器传递或保存数据。栈内存的生命期与当前函数的生命期一样。
+ 栈大小一般情况下是（%ebp/%rbp）函数基地址和 (%esp/%rsp) 函数栈顶地址之间的内存块。
    - 有时候不一定需要函数栈顶地址，因为它可以通过函数基地址结合变量等数据计算出来。
+ 栈内存保存数据：函数参数数据副本，函数内部临时变量数据，函数基地址，函数调用者运行的指令地址等等。


## x86-64 调用约定

